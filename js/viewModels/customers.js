/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 * @ignore
 */
define(["accUtils","knockout","ojs/ojarraydataprovider","ojs/ojconverter-number","ojs/ojknockout","ojs/ojtable","ojs/ojbutton","ojs/ojrouter","ojs/ojinputtext","ojs/ojformlayout","ojs/ojdialog"],(function(e,t,o,i){return function(){var r=this;r.connected=function(){e.announce("Customers page loaded."),r.setDialog("modalDialog"),r.setTitle("Customers")},r.setTitle=function(e){document.title=e},r.setDialog=function(e){r.modalDialog=document.getElementById(e)},r.disconnected=function(){},r.transitionCompleted=function(){},r.columnArray=[{headerText:"Name",field:"name"},{headerText:"City",field:"city"},{headerText:"Phone",field:"phone"},{headerText:"E-mail",field:"email"},{headerText:"Net income",field:"net_income",template:"netIncomeCellTemplate",className:"table--align-right",headerClassName:"table--align-right"},{headerText:"Customer sites",field:"sites",template:"siteCellTemplate"},{headerText:"Customer services",field:"_id",template:"serviceCellTemplate"}],r.usdShortNumberConverter=new i.IntlNumberConverter({style:"currency",currency:"USD",currencyDisplay:"symbol"}),r.activityDataProvider=t.observable(),$.getJSON("api/mock/customer/customer_data.json").then((function(e){r.activityDataProvider(new o(e,{keyAttributes:"_id"}))}));var a=oj.Router.rootInstance;r.showServices=function(e,t){a.store({customerId:t.row._id,customerName:t.row.name}),a.go("services")},r.customerSites=t.observableArray([]),r.dialogDataProvider=new o(r.customerSites),r.closeCustomerSiteDialog=function(e){r.modalDialog.close()},r.openCustomerSiteDialog=function(e,t){r.setCustomerSitesToShow(t),r.modalDialog.setProperties({dialogTitle:"Customer sites: "+t.row.name}),r.modalDialog.open()},r.setCustomerSitesToShow=function(e){r.customerSites.removeAll(),e.data.forEach(e=>{r.customerSites.push(e)})}}}));